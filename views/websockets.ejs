<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Websockets</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-lua.min.js"></script>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Websockets</h1>
    <h2>What are websockets?</h2>
    <p>Websockets are an easy way to send and receive data across multiple computers. I do not feel like setting up a websocket right now so just use the tweaked.cc one to test</p>
    <pre><img src="/img/copy.png" id="lua-copy-image" alt="Copy text" onclick="copyText()"><code class="language-lua" id="toCopy">local ws = assert(http.websocket("wss://example.tweaked.cc/echo"))
ws.send("Hello!") -- Send a message
print(ws.receive()) -- And receive the reply
ws.close()</code></pre>
    <h2>How do I set up my own websocket?</h2>
    <p>Setting up your own websocket is too complicated to go into right now because it involves setting up your own web server. If you would like to learn how to set up a web server with node js and express, <a href="https://www.youtube.com/watch?v=yp1VxbYYTmM" target="_blank">here is a great tutorial</a>.</p>
    <p>Quick side note for that video, since you are not hosting the server locally I reccomend a tunneling service like ngrok or cloudflared. It works the exact same way, just replace "localhost:XXXX" with your url you get from the tunneling service.</p>
    <br>

    <%- sidebar %>

    <a href="https://tweaked.cc/module/http.html#v:websocket" target="_blank">Click here to learn more on tweaked.cc</a>
  </div>

<script>
  function copyText() {
      const parentElement = document.getElementById('toCopy');
      let textToCopy = '';

      for (let i = 0; i < parentElement.childNodes.length; i++) {
          const child = parentElement.childNodes[i];

          textToCopy += child.textContent;
      }

      navigator.clipboard.writeText(textToCopy)
          .then(function() {
              const button = document.getElementById('lua-copy-image')
              button.src = '/img/check.png'
              button.style.height = '25px'
          })
          .catch(function(error) {
              console.error('Unable to copy text to clipboard:', error);
          });
  }
</script>
</body>
</html>
